/*
 * pangu.js
 * --------
 * @version: 2.0.1
 * @author: Vinta <vinta.chen@gmail.com> (https://github.com/vinta)
 * @license: MIT License
 * @url: https://github.com/vinta/paranoid-auto-spacing
 * @description: Insert a white space between full-width characters (Chinese, Japanese, etc.) and half-width alphanumerics. For good readability.
 */
!function(a){function b(a,b){for(var c=a.childNodes,d=0;d<c.length;d++)if(child_node=c[d],8!=child_node.nodeType&&child_node.textContent)return child_node==b;return!1}function c(a,b){for(var c=a.childNodes,d=c.length-1;d>-1;d--)if(child_node=c[d],8!=child_node.nodeType&&child_node.textContent)return child_node==b;return!1}function d(a){return a=a.replace(/([\u4e00-\u9fa5\u3040-\u30FF])(["'](\S+))/gi,"$1 $2"),a=a.replace(/((\S+)["'])([\u4e00-\u9fa5\u3040-\u30FF])/gi,"$1 $3"),a=a.replace(/([\u4e00-\u9fa5\u3040-\u30FF])(#(\S+))/gi,"$1 $2"),a=a.replace(/((\S+)#)([\u4e00-\u9fa5\u3040-\u30FF])/gi,"$1 $3"),a=a.replace(/([\u4e00-\u9fa5\u3040-\u30FF])([a-z0-9@&=_\[\$\%\^\*\-\+\(\/\\])/gi,"$1 $2"),a=a.replace(/([a-z0-9!~&;=_\]\,\.\:\?\$\%\^\*\-\+\)\/\\])([\u4e00-\u9fa5\u3040-\u30FF])/gi,"$1 $2")}function e(a){for(var e,f=document.evaluate(a,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),g=f.snapshotLength,h=g-1;h>-1;--h){var i=f.snapshotItem(h);if(i.data=d(i.data),e){var j=/^(a|br|del|p|pre|s|strike|u)$/i,k=i.data.toString().substr(-1)+e.data.toString().substr(0,1),l=d(k);if(k!=l){for(var m=e;m.parentNode&&-1==m.nodeName.search(j)&&b(m.parentNode,m);)m=m.parentNode;for(var n=i;n.parentNode&&-1==n.nodeName.search(j)&&c(n.parentNode,n);)n=n.parentNode;-1==m.nodeName.search(j)?e.data=" "+e.data:-1==n.nodeName.search(j)?i.data=i.data+" ":m.parentNode.insertBefore(document.createTextNode(" "),m)}}e=i}}a.text_spacing=function(a){return d(a)},a.page_spacing=function(){var a=((new Date).getTime(),["script","style"]),b="";a.forEach(function(a){b+='[translate(name(..),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")!="'+a+'"]'});var c="/html/body//*[not(@contenteditable)]/text()[normalize-space(.)]"+b;e(c);var d="/html/head/title/text()";e(d);(new Date).getTime()},a.element_spacing=function(a){var b;if(0===a.indexOf("#")){var c=a.substr(1,a.length-1);b='id("'+c+'")//text()'}else if(0===a.indexOf(".")){var d=a.slice(1);b='//*[contains(concat(" ", normalize-space(@class), " "), " '+d+' ")]/text()'}else{var f=a;b="//"+f+"//text()"}e(b)}}(window.pangu=window.pangu||{});